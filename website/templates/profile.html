{% extends "base.html" %}
{% block content %}

<div class="container py-5" style="max-width: 600px;">

  <!-- Profile Picture -->
  <div class="text-center mb-4">
    <img src="{{ profile_image }}" alt="Profile Picture" class="rounded-circle img-thumbnail" style="width: 150px; height: 150px; object-fit: cover;">
  </div>

  <!-- Upload Form -->
  <form method="POST" enctype="multipart/form-data" class="mb-5">
    <div class="form-group">
      <label for="profile-pic" class="pfpp">
        Choose Profile Picture
        <input type="file" name="profile-pic" id="profile-pic" accept="image/*" required hidden>
      </label>
    </div>
    <button type="submit" class="uploadpfp">Upload</button>
  </form>

  <!-- Welcome Message -->
  <div class="mb-5 text-center">
    <h4>Welcome, {{ user.first_name }}!</h4>
  </div>

  <!-- Change Password -->
  <div class="mb-4">
    <h5 class="mb-3">Change Password</h5>
    <form method="POST" action="{{ url_for('views.update_password') }}">
      <div class="form-group">
        <label for="current_password">Current Password</label>
        <input type="password" name="current_password" id="current_password" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="new_password">New Password</label>
        <input type="password" name="new_password" id="new_password" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="confirm_password">Confirm New Password</label>
        <input type="password" name="confirm_password" id="confirm_password" class="form-control" required>
      </div>
      <button type="submit" class="uppassword">Update Password</button>
    </form>
  </div>

  <!-- Change Email -->
  <div class="mb-4">
    <h5 class="mb-3">Change Email</h5>
    <form method="POST" action="{{ url_for('views.update_email') }}" id="change-email-form">
      <div class="form-group">
        <label for="current_email">Current Email</label>
        <input type="email" name="current_email" id="current_email" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="new_email">New Email</label>
        <input type="email" name="new_email" id="new_email" class="form-control" required>
      </div>
    </form>
  </div>

</div>

<!-- Fixed Update Email button -->
<button type="submit" form="change-email-form" class="updateemail">
  Update Email
</button>

{% endblock %}
